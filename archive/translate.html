<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speech Translation with Avatar</title>
    <link rel="stylesheet" href="static/css/styles.css">
</head>
<body>
<h1>Speech Translation with Avatar</h1>

<input type="hidden" id="clientId" value="{{ client_id }}">

<div id="configuration">
  <h2 style="background-color: white; width: 400px;">Translation Configuration</h2>
  
  <label style="font-size: medium;" for="sourceLanguage">Source Language (Speak in):</label>
  <select id="sourceLanguage" style="font-size: medium; width: 200px;">
    <option value="en-US">English (US)</option>
    <option value="es-ES">Spanish (Spain)</option>
    <option value="fr-FR">French (France)</option>
    <option value="de-DE">German (Germany)</option>
    <option value="it-IT">Italian (Italy)</option>
    <option value="pt-BR">Portuguese (Brazil)</option>
    <option value="ja-JP">Japanese</option>
    <option value="zh-CN">Chinese (Mandarin, Simplified)</option>
    <option value="ko-KR">Korean</option>
    <option value="hi-IN">Hindi (India)</option>
  </select><br />
  
  <label style="font-size: medium;" for="targetLanguage">Target Language (Translate to):</label>
  <select id="targetLanguage" style="font-size: medium; width: 200px;">
    <option value="es-ES" selected>Spanish (Spain)</option>
    <option value="en-US">English (US)</option>
    <option value="fr-FR">French (France)</option>
    <option value="de-DE">German (Germany)</option>
    <option value="it-IT">Italian (Italy)</option>
    <option value="pt-BR">Portuguese (Brazil)</option>
    <option value="ja-JP">Japanese</option>
    <option value="zh-CN">Chinese (Mandarin, Simplified)</option>
    <option value="ko-KR">Korean</option>
    <option value="hi-IN">Hindi (India)</option>
  </select><br />
  
  <label style="font-size: medium;" for="targetVoice">Target Voice (for Avatar):</label>
  <input id="targetVoice" type="text" size="32" style="font-size: medium;" value="es-ES-ElviraNeural" placeholder="e.g., es-ES-ElviraNeural"></input><br />
  <span style="font-size: small; color: #666;">ğŸ’¡ Leave empty to use current avatar voice</span><br /><br />
  
  <h2 style="background-color: white; width: 400px;">Avatar Configuration</h2>
  <label style="font-size: medium;" for="talkingAvatarCharacter">Avatar Character:</label>
  <input id="talkingAvatarCharacter" type="text" size="32" style="font-size: medium;" value="lisa"></input><br />
  <label style="font-size: medium;" for="talkingAvatarStyle">Avatar Style:</label>
  <input id="talkingAvatarStyle" type="text" size="32" style="font-size: medium;" value="casual-sitting"></input><br />
  <label style="font-size: medium;" for="backgroundColor">Background Color:</label>
  <input id="backgroundColor" type="text" size="16" style="font-size: medium;" value="#FFFFFFFF"></input><br />
  <input type="checkbox" id="customizedAvatar">Custom Avatar</input><br />
  <input type="checkbox" id="useBuiltInVoice" checked>Use Built-In Voice</input><br />
  <input type="checkbox" id="transparentBackground">Transparent Background</input><br />
  <input type="checkbox" id="videoCrop">Crop Video (16:9)</input><br />
</div>

<h2 style="background-color: white; width: 400px;">Control Panel</h2>
<button id="startSession" onclick="window.startSession()">Connect Avatar</button>
<button id="testSpeak" onclick="window.testSpeak()" disabled>ğŸ”Š Test Speak</button>
<button id="stopSession" onclick="window.stopSession()" disabled>Disconnect Avatar</button><br /><br />

<button id="startTranslation" onclick="window.startTranslation()" disabled>ğŸ¤ Start Translation</button>
<button id="stopTranslation" onclick="window.stopTranslation()" disabled>â¹ï¸ Stop Translation</button>
<div id="microphoneIndicator" style="display: none; margin-top: 10px; padding: 10px; background-color: #ffebee; border-left: 4px solid #f44336;">
  <span style="font-size: 16px; color: #f44336;">ğŸ¤ <strong>Listening...</strong> Speak into your microphone</span>
  <div id="audioLevel" style="margin-top: 5px; height: 10px; background-color: #ffcdd2; border-radius: 5px;">
    <div id="audioLevelBar" style="height: 100%; width: 0%; background-color: #f44336; border-radius: 5px; transition: width 0.1s;"></div>
  </div>
</div>
<br /><br />

<h2 style="background-color: white; width: 800px;">Live Transcription</h2>
<div style="display: flex; gap: 20px; margin-bottom: 20px; width: 1200px;">
  <div style="flex: 1; min-width: 400px;">
    <h3 style="margin: 0 0 10px 0; color: #2196F3;">Source (Speaking)</h3>
    <div id="sourceTranscription" style="border: 1px solid #2196F3; padding: 10px; min-height: 100px; background-color: #e3f2fd; border-radius: 4px;">
      <p style="color: #999; margin: 0;">Original speech will appear here...</p>
    </div>
  </div>
  <div style="flex: 1; min-width: 400px;">
    <h3 style="margin: 0 0 10px 0; color: #4CAF50;">Target (Translated)</h3>
    <div id="targetTranscription" style="border: 1px solid #4CAF50; padding: 10px; min-height: 100px; background-color: #e8f5e9; border-radius: 4px;">
      <p style="color: #999; margin: 0;">Translated text will appear here...</p>
    </div>
  </div>
</div>

<h2 style="background-color: white; width: 800px;">Translation History</h2>
<div id="translationResults" style="border: 1px solid #ccc; padding: 10px; min-height: 150px; max-height: 300px; overflow-y: auto; background-color: #f9f9f9; width: 1200px;">
  <p style="color: #999;">Translation results will appear here...</p>
</div>

<h2 id="videoLabel" style="background-color: white; width: 400px;">Avatar Video</h2>
<div id="remoteVideo" style="width: 960px; min-height: 540px; margin-bottom: 20px; background-color: #000;"></div>

<h2 style="background-color: white; width: 400px;">Logs</h2>
<textarea id="logging" style="width: 1200px; height: 300px; font-size: small;"></textarea>

<!-- Socket.IO Client Library -->
<script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
<!-- Translation Application Logic -->
<script src="static/js/translate.js"></script>
</body>
</html>
